# Fan Out On Write

## 문제점

팔로우한 사람들 목록에 따라 타임라인을 보여주는 기능을 구현하려고 한다.
팔로우한 사람들 목록을 가져오는 것은 쉽다. 하지만 팔로우한 사람들의 타임라인을 가져오는 것은 어렵다.
팔로우한 사람들의 타임라인을 가져오기 위해서는 팔로우한 사람들의 타임라인을 가져오는 쿼리를 각각 실행해야 한다.

사용자가 많아지면 타임라인을 구성하는데 시간이 오래 걸린다.

## 해결책

Fan Out On Write 기법을 사용한다.

팔로우한 사람들의 타임라인을 가져오는 쿼리를 각각 실행하는 것이 아니라   
팔로우한 사람이 글을 쓸때 자신을 팔로우하는 사람들의 타임라인에 글을 추가하는 방식으로 구현한다.

사용자는 자신의 타임라인을 가져오는 쿼리를 실행하면 자신이 팔로우하는 사람들의 게시물을 가져올 수 있다.

## 주의

모든 사용자에게 Fan Out On Write 기법을 적용하면 쓰기 성능에 영향을 준다.
팔로워가 많은 사용자가 글을 쓸 때마다 모든 팔로워들의 타임라인에 글을 추가하기 때문이다.

따라서 Fan Out On Write 기법을 적용할 사용자를 적절하게 선택해야 한다.
